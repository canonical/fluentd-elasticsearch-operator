# Copyright 2022 Canonical
# See LICENSE file for licensing details.

name: fluentd-elasticsearch
description: |
  Fluentd is an open-source data collector for a unified logging layer. Fluentd allows you to unify 
  data collection and consumption for better use and understanding of data. This fluentd charm 
  is specifically built to forward logs to elasticsearch.
summary: |
  A charm to manage fluentd elasticsearch integration on kubernetes

containers:
  fluentd-elasticsearch:
    resource: fluentd-elasticsearch-image
    mounts:
      - storage: certs
        location: /certs
      - storage: config
        location: /etc/fluent/config.d

storage:
  certs:
    type: filesystem
    description: Certificates storage
    minimum-size: 1M
  config:
    type: filesystem
    description: Configs storage
    minimum-size: 1M

requires:
  cert-certifier:
    interface: cert-certifier
  cert-fluentd:
    interface: cert-fluentd

resources:
  fluentd-elasticsearch-image:
    type: oci-image
    description: OCI image for fluentd-elasticsearch
    upstream-source: gcr.io/google-containers/fluentd-elasticsearch:v2.4.0
